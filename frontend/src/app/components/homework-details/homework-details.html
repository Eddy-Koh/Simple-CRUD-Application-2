<!-- View Mode -->
<div *ngIf="viewMode">
  <div *ngIf="currentHomework.id; else noHomeworkSelected">
    <h4 class="text-cent">Homework Details</h4>
    <br />

    <!-- Title -->
    <div>
      <label><strong>Title:</strong></label>
      {{ currentHomework.title }}
      <br />
    </div>

    <!-- Description -->
    <div>
      <label><strong>Description:</strong></label>
      <br />
      {{ currentHomework.description }}
      <br /><br />
    </div>

    <!-- Status -->
    <div>
      <label><strong>Status:</strong></label>
      {{ currentHomework.done ? 'Done' : 'In Progress' }}
    </div>

    <!-- Role-aware badge -->
    <div *ngIf="currentHomework.createdByTeacher" class="mt-2">
      <span class="badge badge-info">Assigned by Teacher</span>
    </div>

    <!-- View/Edit Button -->
    <div class="button-wrapper mt-3">
      <a class="badge badge-warning" [routerLink]="'/homeworks/' + currentHomework.id">
        View / Edit
      </a>
    </div>

    <!-- Decorative Image -->
    <div class="Details">
      <img src="assets/images/Detail2.png" class="detail2-img" />
    </div>
  </div>

  <!-- If no homework selected -->
  <ng-template #noHomeworkSelected>
    <div *ngIf="homeworks.length > 0">
      <div class="message-box text-center">
        <p class="text-muted">Please click on a homeworks list to show the details...</p>
      </div>
      <div class="Details">
        <img src="assets/images/Detail.png" class="details-img" />
      </div>
    </div>
  </ng-template>
</div>

<!-- Edit Mode -->
<div *ngIf="!viewMode">
  <div *ngIf="currentHomework.id; else cannotAccess">
    <div class="edit-form">
      <h4 class="text-cent"><br />Homework Details<br /></h4>

      <form>
        <!-- Title -->
        <div class="form-group">
          <label for="title">Title</label>
          <input
            type="text"
            class="form-control"
            id="title"
            [(ngModel)]="currentHomework.title"
            name="title"
            [readonly]="isStudent && currentHomework.createdByTeacher"
            placeholder="Enter homework title"
          />
        </div>

        <!-- Description -->
        <div class="form-group">
          <label for="description">Description</label>
          <textarea
            class="form-control description-inp"
            id="description"
            [(ngModel)]="currentHomework.description"
            name="description"
            rows="5"
            [readonly]="isStudent && currentHomework.createdByTeacher"
            placeholder="Enter homework description"
          ></textarea>
        </div>

        <!-- Status -->
        <div class="form-group">
          <label><strong>Status:</strong></label>
          {{ currentHomework.done ? 'Done' : 'In Progress' }}
        </div>
      </form>

      <!-- Buttons -->
      <div class="mt-3 d-flex justify-content-center flex-wrap gap-3">
        <!-- Status Button -->
        <button
          class="badge bg-primary text-white px-3 py-2 fw-bold cursor-pointer"
          (click)="updateDone(!currentHomework.done)"
        >
          {{ currentHomework.done ? 'Mark as In Progress' : 'Mark as Done' }}
        </button>

        <!-- Delete -->
        <button
          *ngIf="!(isStudent && currentHomework.createdByTeacher)"
          class="badge bg-danger text-white px-3 py-2 fw-bold cursor-pointer"
          (click)="deleteHomework()"
        >
          Delete
        </button>

        <!-- Update -->
        <button
          *ngIf="!(isStudent && currentHomework.createdByTeacher)"
          type="submit"
          class="badge bg-success text-white px-3 py-2 fw-bold cursor-pointer"
          (click)="updateHomework()"
        >
          Update
        </button>

        <!-- Back -->
        <button
          class="badge bg-secondary text-white px-3 py-2 fw-bold cursor-pointer"
          (click)="goBack()"
        >
          Back
        </button>
      </div>

      <!-- Message -->
      <p class="mt-2">{{ message }}</p>
    </div>
  </div>

  <!-- If homework is not accessible -->
  <ng-template #cannotAccess>
    <p>Cannot access this Homework...</p>
  </ng-template>
</div>
